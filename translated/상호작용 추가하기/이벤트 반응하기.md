# 상호작용 추가

사용자의 입력에 반응하여 화면의 어떤 것들은 업데이트됩니다. 예를 들어 사진첩을 클릭하면 이미지를 움직이게 할 수 있습니다. 리액트에서는 시간이 지나면서 바뀌는 데이터를 "state"라고 부릅니다. state를 어떤 컴포넌트에도 추가 할 수 있고, 필요에 따라 업데이트도 할 수 있습니다. 이번 챕터에서는, 상호작용을 다루고, 컴포넌트들의 state를 업데이트 하고, 그럼으로써 다른 결과값을 보여주는 컴포넌트를 작성하는 방법을 배울 것 입니다.

### 목차
- 어떻게 유저가 일으키는 이벤트를 다룰끼
- 어떻게 컴포넌트가 state와 함께 정보를 "기억"하게 만들까
- 리액트가 UI를 업데이트시키는 2가지 방법
- 왜 state는 변경 직후 업데이트 되지 않을까?
- 어떻게 여러개의 state 업데이트의 대기열을 만들 수 있을까
- 객체 형태의 state 업데이트하기
- 배열 형태의 state 업데이트하기

## 이벤트에 응답하기(Responding to events)

리액트에선 이벤트 핸들러를 JSX에 추가 할 수 있습니다. 이벤트 핸들러란 클릭, 마우스를 올리기, 폼 입력창에 포커싱하기 등 과 같이 유저의 상호작용에 반응해서 발생될 수 있는 우리가 만든 함수입니다. 

<button> 과 같은 내장 컴포넌트들은 onClick과 같은 내장 브라우저 이벤트만 지원합니다. 하지만 우리가 직접 컴포넌트를 만들수도 있습니다. 또는 그러한 이벤트
핸들러들은 우리가 원하는 애플리케이션에 특정한 어떤 이름으로도 지을 수 있습니다. 

## State: 컴포넌트의 메모리(State: a component’s memory)

종종 컴포넌트들은 상호작용의 결과로 화면에 보이는 어떠한 것을 변경해야할지도 모릅니다. 폼에 글자를 입력하는 것은 입력 필드를 업데이트 할 수도 있고요.  여러개의 이미지가 있을 때 "다음"을 클릭하면 보여야할 이미지를 바꿔야 할 수도 있습니다. 또한 "구매"를 누르면 쇼핑 카트에 물건을 담아야 할 지도 모르고요. 컴포넌트는 다음과 같은 것들을 "기억"해야 할 필요가 있습니다: 현재의 입력 값, 현재 보여줘야 할 이미지, 쇼핑 카트. 리액트에서는 컴포넌트에 특정한 메모리 같은 것들을 state 라고 부릅니다.

usuState 훅으로 컴포넌트에 state를 추가할 수 있습니다. 훅은 우리가 만든 컴포넌트가 리액트의 특성들을 사용할 수 있게해주는 특별한 함수들입니다(state는 그 특성들 중에 하나이고요.) useState 훅은 우리에게 state 변수를 선언해줍니다. useState는 초기값과 value 한 쌍을 반환합니다. 그 한쌍은 현재의 state, 그리고 그 state를 업데이트 시켜주는 setter function 같은 것을 말합니다.

여기에 클릭을 하면 이미지 갤러리가 어떻게 state를 사용하고 업데이트하는지 나와있습니다.

## 렌더와 커밋(Render and commit)

화면에 컴포넌트들이 보이기 전에, 그것들은 리액트에 의해 렌더되어야 합니다. 이 과정에서 이 단계들을 이해하는 것은 우리가 짠 코드들이 어떻게 실행되고 어떻게 그 러한 것들이 동작하는지 설명 할 수 있을지 생각해보는데 도움을 줄 것 입니다. 

당신의 컴포넌트들이 재료들로 맛있는 음식을 만들면서 주방에서 요리를 하고있다고 생각해보세요. 리액트는 손님들로부터 (주문에 대한)요청을 접수하고 그들의 주문을 주방으로 가지고 오는 웨이터입니다.  UI를 요청하고 보여주는 과정은 3가지 단계를 거칩니다.

1. render를 일으킵니다.(손님의 주문을 주방으로 전달합니다)
2. 컴포넌트를 render 합니다.(주방에서 주문에 맞는 음식을 준비합니다) 
3. DOM을 commit 합니다.(테이블에 음식을 가져다 놓습니다)

## 스냅샷으로써의 state (State as a snapshot)

일반적인 javascript 변수와는 달리, react의 변수는 스냅샷 같습니다. **변수를 설정하는 것은 우리가 가지고 있던 state 변수를 변경하는 것이 아니라 re-render를 발생시킵니다.
처음엔 좀 놀랄지도 모릅니다.

이러한 동작은 미묘한 버그들을 피하게끔 도와줍니다. 여기 작은 규모의 chat app 예시가 있습니다. 만약 우리가 "Send"버튼을 누르고 수신자를 Bob으로 바꿔여한다면  어떤 일이 일어날지 예상해보세요. 5초 후에 alert 창에 누구의 이름이 나올까요?

## state 업데이트를 차례로 줄 세우기 (Queueing a series of state updates)

이 컴포넌트에는 버그가 있습니다. 바로 "+3"을 클릭하면 점수가 1만 증가합니다.

State as a Snapshot 장에선 왜 이런 일이 일어났는지 설명해줍니다. **state를 설정하는 것은 re-render를 요청하지만, 이미 실행되고 있는 코드에서는 state 변경이 이루어지 않습니다.  그렇기 때문에 score 는 setScore(score + 1)을 요청한 직후에도 계속 0입니다.

state를 설정할 떄 updater 함수를 넘겨줌으로써 이것을 해결 할 수 있습니다. setScore(score + 1)를 setScore(s => s + 1)로 고침으로써 어떤 식으로 "+3" 버튼을 고쳐주는지 주목해보세요. 이것은 여러개의 state를 업데이트를 차례로 줄짓게 만들어 줍니다.

## 객체 형태의 state를 업데이트 하기(Updating objects in state)

state에는 객체 형태도 포함하여 javascript의 어떤 값도 쓸 수 있습니다. 하지만 react state에 있는 객체나 배열을 직접적으로 바꿀 순 없습니다. 대신 객체나 배열을 업데이트 하고 싶다면 새로운 객체나 배열을 만들어야합니다.(혹은 이미 존재하는 것의 복사본을 만들거나), 그리고 그 복사본을 이용해서 state를 업데이트합니다. 

바꾸고 싶은 객체나 배열을 복사하기위해서 ... 스프레드 구문을 쓸 수 있습니다. 예를 들어 중첩 객체를 업데이트하는 방법은 다음과 같습니다.

만약 코드 안에서 객체들을 복사하는게 지겹다면, 중복되는 코드의 양을 줄여주는 immer와 같은 라이브러리를 사용 할 수 있습니다.

## 배열 형태의 state를 업데이트 하기(Updating arrays in state)

배열은 state에 저장할 수 있는 변경가능한 javascript 객체(가변 객체)의 또 다른 타입입니다. state에 저장된 배열을 업데이트하고 싶다면, 객체형태의 state를 업데이트 한 방식과 같이 새로운 배열을 만들어야만 합니다.(혹은 존재하는 배열의 복사본을 만들거나) 그 다 새로운 배열을 사용하기위해 state를 설정합니다.




<!-- commit 주석달아야하나? -->
<!-- queque 해석 대기열에 넣기, 줄세우기 -->
